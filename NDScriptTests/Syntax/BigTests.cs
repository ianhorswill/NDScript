using Mono.Cecil.Cil;
using System.Collections.Immutable;
using NDScript.Syntax;
using Sprache;
using static NDScript.NDScript;

namespace NDScriptTests.Syntax
{
    [TestClass]
    public class BigTests
    {
		[TestMethod]
		[Ignore("This is mostly here just to see why it was crashing the WASM interpreter and the answer is stack overflow because the code is too complicated")]
        public void JessicaTest()
        {
            var output = ProgramOutput(Jessica);
        }

        private static string Jessica = @"// adg
// beh
// cfi
var sudoku = {
	onea: setOf([1,1], [1,2], [1,3], [2,1], [2,2], [2,3], [3,1], [3,2], [3,3]),
	oneb: setOf([4,1], [4,2], [4,3], [5,1], [5,2], [5,3], [6,1], [6,2], [6,3]),
	onec: setOf([7,1], [7,2], [7,3], [8,1], [8,2], [8,3], [9,1], [9,2], [9,3]),
	oned: setOf([1,4], [1,5], [1,6], [2,4], [2,5], [2,6], [3,4], [3,5], [3,6]),
	onee: setOf([4,4], [4,5], [4,6], [5,4], [5,5], [5,6], [6,4], [6,5], [6,6]),
	onef: setOf([7,4], [7,5], [7,6], [8,4], [8,5], [8,6], [9,4], [9,5], [9,6]),
	oneg: setOf([1,7], [1,8], [1,9], [2,7], [2,8], [2,9], [3,7], [3,8], [3,9]),
	oneh: setOf([4,7], [4,8], [4,9], [5,7], [5,8], [5,9], [6,7], [6,8], [6,9]),
	onei: setOf([7,7], [7,8], [7,9], [8,7], [8,8], [8,9], [9,7], [9,8], [9,9]),
	twoa: setOf([1,1], [1,2], [1,3], [2,1], [2,2], [2,3], [3,1], [3,2], [3,3]),
	twob: setOf([4,1], [4,2], [4,3], [5,1], [5,2], [5,3], [6,1], [6,2], [6,3]),
	twoc: setOf([7,1], [7,2], [7,3], [8,1], [8,2], [8,3], [9,1], [9,2], [9,3]),
	twod: setOf([1,4], [1,5], [1,6], [2,4], [2,5], [2,6], [3,4], [3,5], [3,6]),
	twoe: setOf([4,4], [4,5], [4,6], [5,4], [5,5], [5,6], [6,4], [6,5], [6,6]),
	twof: setOf([7,4], [7,5], [7,6], [8,4], [8,5], [8,6], [9,4], [9,5], [9,6]),
	twog: setOf([1,7], [1,8], [1,9], [2,7], [2,8], [2,9], [3,7], [3,8], [3,9]),
	twoh: setOf([4,7], [4,8], [4,9], [5,7], [5,8], [5,9], [6,7], [6,8], [6,9]),
	twoi: setOf([7,7], [7,8], [7,9], [8,7], [8,8], [8,9], [9,7], [9,8], [9,9]),
	threea: setOf([1,1], [1,2], [1,3], [2,1], [2,2], [2,3], [3,1], [3,2], [3,3]),
	threeb: setOf([4,1], [4,2], [4,3], [5,1], [5,2], [5,3], [6,1], [6,2], [6,3]),
	threec: setOf([7,1], [7,2], [7,3], [8,1], [8,2], [8,3], [9,1], [9,2], [9,3]),
	threed: setOf([1,4], [1,5], [1,6], [2,4], [2,5], [2,6], [3,4], [3,5], [3,6]),
	threee: setOf([4,4], [4,5], [4,6], [5,4], [5,5], [5,6], [6,4], [6,5], [6,6]),
	threef: setOf([7,4], [7,5], [7,6], [8,4], [8,5], [8,6], [9,4], [9,5], [9,6]),
	threeg: setOf([1,7], [1,8], [1,9], [2,7], [2,8], [2,9], [3,7], [3,8], [3,9]),
	threeh: setOf([4,7], [4,8], [4,9], [5,7], [5,8], [5,9], [6,7], [6,8], [6,9]),
	threei: setOf([7,7], [7,8], [7,9], [8,7], [8,8], [8,9], [9,7], [9,8], [9,9]),
	foura: setOf([1,1], [1,2], [1,3], [2,1], [2,2], [2,3], [3,1], [3,2], [3,3]),
	fourb: setOf([4,1], [4,2], [4,3], [5,1], [5,2], [5,3], [6,1], [6,2], [6,3]),
	fourc: setOf([7,1], [7,2], [7,3], [8,1], [8,2], [8,3], [9,1], [9,2], [9,3]),
	fourd: setOf([1,4], [1,5], [1,6], [2,4], [2,5], [2,6], [3,4], [3,5], [3,6]),
	foure: setOf([4,4], [4,5], [4,6], [5,4], [5,5], [5,6], [6,4], [6,5], [6,6]),
	fourf: setOf([7,4], [7,5], [7,6], [8,4], [8,5], [8,6], [9,4], [9,5], [9,6]),
	fourg: setOf([1,7], [1,8], [1,9], [2,7], [2,8], [2,9], [3,7], [3,8], [3,9]),
	fourh: setOf([4,7], [4,8], [4,9], [5,7], [5,8], [5,9], [6,7], [6,8], [6,9]),
	fouri: setOf([7,7], [7,8], [7,9], [8,7], [8,8], [8,9], [9,7], [9,8], [9,9]),
	fivea: setOf([1,1], [1,2], [1,3], [2,1], [2,2], [2,3], [3,1], [3,2], [3,3]),
	fiveb: setOf([4,1], [4,2], [4,3], [5,1], [5,2], [5,3], [6,1], [6,2], [6,3]),
	fivec: setOf([7,1], [7,2], [7,3], [8,1], [8,2], [8,3], [9,1], [9,2], [9,3]),
	fived: setOf([1,4], [1,5], [1,6], [2,4], [2,5], [2,6], [3,4], [3,5], [3,6]),
	fivee: setOf([4,4], [4,5], [4,6], [5,4], [5,5], [5,6], [6,4], [6,5], [6,6]),
	fivef: setOf([7,4], [7,5], [7,6], [8,4], [8,5], [8,6], [9,4], [9,5], [9,6]),
	fiveg: setOf([1,7], [1,8], [1,9], [2,7], [2,8], [2,9], [3,7], [3,8], [3,9]),
	fiveh: setOf([4,7], [4,8], [4,9], [5,7], [5,8], [5,9], [6,7], [6,8], [6,9]),
	fivei: setOf([7,7], [7,8], [7,9], [8,7], [8,8], [8,9], [9,7], [9,8], [9,9]),
	sixa: setOf([1,1], [1,2], [1,3], [2,1], [2,2], [2,3], [3,1], [3,2], [3,3]),
	sixb: setOf([4,1], [4,2], [4,3], [5,1], [5,2], [5,3], [6,1], [6,2], [6,3]),
	sixc: setOf([7,1], [7,2], [7,3], [8,1], [8,2], [8,3], [9,1], [9,2], [9,3]),
	sixd: setOf([1,4], [1,5], [1,6], [2,4], [2,5], [2,6], [3,4], [3,5], [3,6]),
	sixe: setOf([4,4], [4,5], [4,6], [5,4], [5,5], [5,6], [6,4], [6,5], [6,6]),
	sixf: setOf([7,4], [7,5], [7,6], [8,4], [8,5], [8,6], [9,4], [9,5], [9,6]),
	sixg: setOf([1,7], [1,8], [1,9], [2,7], [2,8], [2,9], [3,7], [3,8], [3,9]),
	sixh: setOf([4,7], [4,8], [4,9], [5,7], [5,8], [5,9], [6,7], [6,8], [6,9]),
	sixi: setOf([7,7], [7,8], [7,9], [8,7], [8,8], [8,9], [9,7], [9,8], [9,9]),
	sevena: setOf([1,1], [1,2], [1,3], [2,1], [2,2], [2,3], [3,1], [3,2], [3,3]),
	sevenb: setOf([4,1], [4,2], [4,3], [5,1], [5,2], [5,3], [6,1], [6,2], [6,3]),
	sevenc: setOf([7,1], [7,2], [7,3], [8,1], [8,2], [8,3], [9,1], [9,2], [9,3]),
	sevend: setOf([1,4], [1,5], [1,6], [2,4], [2,5], [2,6], [3,4], [3,5], [3,6]),
	sevene: setOf([4,4], [4,5], [4,6], [5,4], [5,5], [5,6], [6,4], [6,5], [6,6]),
	sevenf: setOf([7,4], [7,5], [7,6], [8,4], [8,5], [8,6], [9,4], [9,5], [9,6]),
	seveng: setOf([1,7], [1,8], [1,9], [2,7], [2,8], [2,9], [3,7], [3,8], [3,9]),
	sevenh: setOf([4,7], [4,8], [4,9], [5,7], [5,8], [5,9], [6,7], [6,8], [6,9]),
	seveni: setOf([7,7], [7,8], [7,9], [8,7], [8,8], [8,9], [9,7], [9,8], [9,9]),
	eighta: setOf([1,1], [1,2], [1,3], [2,1], [2,2], [2,3], [3,1], [3,2], [3,3]),
	eightb: setOf([4,1], [4,2], [4,3], [5,1], [5,2], [5,3], [6,1], [6,2], [6,3]),
	eightc: setOf([7,1], [7,2], [7,3], [8,1], [8,2], [8,3], [9,1], [9,2], [9,3]),
	eightd: setOf([1,4], [1,5], [1,6], [2,4], [2,5], [2,6], [3,4], [3,5], [3,6]),
	eighte: setOf([4,4], [4,5], [4,6], [5,4], [5,5], [5,6], [6,4], [6,5], [6,6]),
	eightf: setOf([7,4], [7,5], [7,6], [8,4], [8,5], [8,6], [9,4], [9,5], [9,6]),
	eightg: setOf([1,7], [1,8], [1,9], [2,7], [2,8], [2,9], [3,7], [3,8], [3,9]),
	eighth: setOf([4,7], [4,8], [4,9], [5,7], [5,8], [5,9], [6,7], [6,8], [6,9]),
	eighti: setOf([7,7], [7,8], [7,9], [8,7], [8,8], [8,9], [9,7], [9,8], [9,9]),
	ninea: setOf([1,1], [1,2], [1,3], [2,1], [2,2], [2,3], [3,1], [3,2], [3,3]),
	nineb: setOf([4,1], [4,2], [4,3], [5,1], [5,2], [5,3], [6,1], [6,2], [6,3]),
	ninec: setOf([7,1], [7,2], [7,3], [8,1], [8,2], [8,3], [9,1], [9,2], [9,3]),
	nined: setOf([1,4], [1,5], [1,6], [2,4], [2,5], [2,6], [3,4], [3,5], [3,6]),
	ninee: setOf([4,4], [4,5], [4,6], [5,4], [5,5], [5,6], [6,4], [6,5], [6,6]),
	ninef: setOf([7,4], [7,5], [7,6], [8,4], [8,5], [8,6], [9,4], [9,5], [9,6]),
	nineg: setOf([1,7], [1,8], [1,9], [2,7], [2,8], [2,9], [3,7], [3,8], [3,9]),
	nineh: setOf([4,7], [4,8], [4,9], [5,7], [5,8], [5,9], [6,7], [6,8], [6,9]),
	ninei: setOf([7,7], [7,8], [7,9], [8,7], [8,8], [8,9], [9,7], [9,8], [9,9])
	};
var validcols = {
    colone: setOf([1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9]),
    coltwo: setOf([1,1],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[2,1],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[3,1],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[4,1],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[5,1],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[6,1], [6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[7,1],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[8,1],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[9,1],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9]),
    colthree: setOf([1,1],[1,2],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[2,1],[2,2],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[3,1],[3,2],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[4,1],[4,2],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[5,1],[5,2],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[6,1],[6,2],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[7,1],[7,2],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[8,1],[8,2],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[9,1],[9,2],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9]),
    colfour: setOf([1,1],[1,2],[1,3],[1,5],[1,6],[1,7],[1,8],[1,9],[2,1],[2,2],[2,3],[2,5],[2,6],[2,7],[2,8],[2,9],[3,1],[3,2],[3,3],[3,5],[3,6],[3,7],[3,8],[3,9],[4,1],[4,2],[4,3],[4,5],[4,6],[4,7],[4,8],[4,9],[5,1],[5,2],[5,3],[5,5],[5,6],[5,7],[5,8],[5,9],[6,1],[6,2],[6,3],[6,5],[6,6],[6,7],[6,8],[6,9],[7,1],[7,2],[7,3],[7,5],[7,6],[7,7],[7,8],[7,9],[8,1],[8,2],[8,3],[8,5],[8,6],[8,7],[8,8],[8,9],[9,1],[9,2],[9,3],[9,5],[9,6],[9,7],[9,8],[9,9]),
    colfive: setOf([1,1],[1,2],[1,3],[1,4],[1,6],[1,7],[1,8],[1,9],[2,1],[2,2],[2,3],[2,4],[2,6],[2,7],[2,8],[2,9],[3,1],[3,2],[3,3],[3,4],[3,6],[3,7],[3,8],[3,9],[4,1],[4,2],[4,3],[4,4],[4,6],[4,7],[4,8],[4,9],[5,1],[5,2],[5,3],[5,4],[5,6],[5,7],[5,8],[5,9],[6,1],[6,2],[6,3],[6,4],[6,6],[6,7],[6,8],[6,9],[7,1],[7,2],[7,3],[7,4],[7,6],[7,7],[7,8],[7,9],[8,1],[8,2],[8,3],[8,4],[8,6],[8,7],[8,8],[8,9],[9,1],[9,2],[9,3],[9,4],[9,6],[9,7],[9,8],[9,9]),
    colsix: setOf([1,1],[1,2],[1,3],[1,4],[1,5],[1,7],[1,8],[1,9],[2,1],[2,2],[2,3],[2,4],[2,5],[2,7],[2,8],[2,9],[3,1],[3,2],[3,3],[3,4],[3,5],[3,7],[3,8],[3,9],[4,1],[4,2],[4,3],[4,4],[4,5],[4,7],[4,8],[4,9],[5,1],[5,2],[5,3],[5,4],[5,5],[5,7],[5,8],[5,9],[6,1],[6,2],[6,3],[6,4],[6,5],[6,7],[6,8],[6,9],[7,1],[7,2],[7,3],[7,4],[7,5],[7,7],[7,8],[7,9],[8,1],[8,2],[8,3],[8,4],[8,5],[8,7],[8,8],[8,9],[9,1],[9,2],[9,3],[9,4],[9,5],[9,7],[9,8],[9,9]),
    colseven: setOf([1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,8],[1,9],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,8],[2,9],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,8],[3,9],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,8],[4,9],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,8],[5,9],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,8],[6,9],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,8],[7,9],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,8],[8,9],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,8],[9,9]),
    coleight: setOf([1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,9],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,9],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,9],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,9],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,9],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,9],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,9],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,9],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,9]),
    colnine: setOf([1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8])
    };

var validrows = {
    rowone: setOf([2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9]),
    rowtwo: setOf([1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9]),
    rowthree: setOf([1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9]),
    rowfour: setOf([1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9]),
    rowfive: setOf([1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9]),
    rowsix: setOf([1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9]),
    rowseven: setOf([1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9]),
    roweight: setOf([1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9]),
    rownine: setOf([1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9])
    };

var constraints = [
    [ ""onea"", ""oneb"", ""oneb"", ""onec"", ""oned"", ""onee"", ""onef"", ""oneg"", ""oneh"", ""onei"" ],
    [ ""twoa"", ""twob"", ""twoc"", ""twod"", ""twoe"", ""twof"", ""twog"", ""twoh"", ""twoi""],
    [ ""threea"", ""threeb"", ""threec"", ""threed"", ""threee"", ""threef"", ""threeg"", ""threeh"", ""threei""],
    [ ""foura"", ""fourb"", ""fourc"", ""fourd"", ""foure"", ""fourf"", ""fourg"", ""fourh"", ""fouri""],
    [""fivea"", ""fiveb"", ""fivec"", ""fived"", ""fivee"", ""fivef"", ""fiveg"", ""fiveh"", ""fivei""],
    [""sixa"", ""sixb"", ""sixc"", ""sixd"", ""sixe"", ""sixf"", ""sixg"", ""sixh"", ""sixi""],
    [""sevena"", ""sevenb"", ""sevenc"", ""sevend"", ""sevene"", ""sevenf"", ""seveng"", ""sevenh"", ""seveni"" ],
    [""eighta"", ""eightb"", ""eightc"", ""eightd"", ""eighte"", ""eightf"", ""eightg"", ""eighth"", ""eighti""],
    [""ninea"", ""nineb"", ""ninec"", ""nined"", ""ninee"", ""ninef"", ""nineg"", ""nineh"", ""ninei""]
];

function solve() {
	// Fill me in
	// Repeatedly choose attributes of animal that aren't singleton sets, choose an element, and narrow it.
	foreach(field in (nonsingletonFieldsOf(sudoku))){
		narrowTo(field, setOf(chooseElement(sudoku[field])));
	}
	print(sudoku);
}
	
deterministic function narrowTo(attribute, set) {
	// Fill me in
	// Remove from animal[attribute] any elements not in set.
	// Fail if the result is empty, propagate to other attributes as necessary.
	var old = sudoku[attribute];
	var new = intersection(old, set);
	if (isEmpty(new)){
		fail;
	}
	if(old != new){
		sudoku[attribute] = new;
		var allcol = chooseElement(new)[1];
		var allrow = chooseElement(new)[0];
		foreach(tup in new){
			if (tup[1] != allcol){
				allcol = 0;
			}
			if (tup[0] != allrow){
				allrow = 0;
			}
		}
		if(allcol != 0 || allrow != 0){
			foreach(fieldagain in (nonsingletonFieldsOf(sudoku))){
				foreach(constraint in constraints){
					if (contains(attribute, constraint)){
						if (contains(fieldagain, constraint)){
							if(allcol != 0){
								if(allcol == 1){
								narrowTo(fieldagain, validcols[""colone""]);
								}
								if(allcol  == 2){
									narrowTo(fieldagain, validcols[""coltwo""]);
								}
								if(allcol  == 3){
									narrowTo(fieldagain, validcols[""colthree""]);
								}
								if(allcol  == 4){
									narrowTo(fieldagain, validcols[""colfour""]);
								}
								if(allcol  == 5){
									narrowTo(fieldagain, validcols[""colfive""]);
								}
								if(allcol  == 6){
									narrowTo(fieldagain, validcols[""colsix""]);
								}
								if(allcol == 7){
									narrowTo(fieldagain, validcols[""colseven""]);
								}
								if(allcol  == 8){
									narrowTo(fieldagain, validcols[""coleight""]);
								}
								if(allcol  == 9){
									narrowTo(fieldagain, validcols[""colnine""]);
								}
							}
							
							if(allrow != 0){
								if(allrow == 1){
								narrowTo(fieldagain, validrows[""rowone""]);
								}
								if(allrow  == 2){
									narrowTo(fieldagain, valirows[""rowtwo""]);
								}
								if(allrow  == 3){
									narrowTo(fieldagain, validrows[""rowthree""]);
								}
								if(allrow  == 4){
									narrowTo(fieldagain, validrows[""rowfour""]);
								}
								if(allrow  == 5){
									narrowTo(fieldagain, validrows[""rowfive""]);
								}
								if(allrow  == 6){
									narrowTo(fieldagain, validrows[""rowsix""]);
								}
								if(allrow == 7){
									narrowTo(fieldagain, validrows[""rowseven""]);
								}
								if(allrow  == 8){
									narrowTo(fieldagain, validrows[""roweight""]);
								}
								if(allrow  == 9){
									narrowTo(fieldagain, validrows[""rownine""]);
								}
							}
						}
					}
				}
				
			}
		}
		}
	}
solve();
";
    }
}